<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>æœ¬å·è¦³å…‰åœ°ãƒã‚¹ã‚¿ãƒ¼ Pro</title>
    <style>
        :root { --main-red: #d32f2f; --correct-green: #4caf50; --wrong-red: #f44336; }
        body { font-family: 'Hiragino Kaku Gothic Pro', sans-serif; background: #f8f9fa; display: flex; justify-content: center; padding: 20px; }
        #game-container { background: white; width: 100%; max-width: 800px; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); padding: 30px; }
        h1 { color: var(--main-red); text-align: center; border-bottom: 3px solid var(--main-red); padding-bottom: 15px; margin-top: 0; }
        .menu-btn { display: block; width: 100%; margin: 12px 0; padding: 18px; font-size: 17px; cursor: pointer; border: 1px solid #ddd; border-radius: 12px; background: #fff; transition: 0.2s; text-align: left; }
        .menu-btn:hover { background: #fff5f5; border-color: var(--main-red); }
        #question-text { font-size: 22px; font-weight: bold; margin: 25px 0; text-align: center; color: #333; min-height: 30px;}
        .option-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .option-btn { padding: 18px; border: 2px solid #eee; border-radius: 10px; cursor: pointer; background: white; font-size: 16px; transition: 0.3s; }
        .correct { background: var(--correct-green) !important; color: white !important; border-color: var(--correct-green) !important; }
        .wrong { background: var(--wrong-red) !important; color: white !important; border-color: var(--wrong-red) !important; }
        .match-container { display: flex; justify-content: space-between; gap: 30px; }
        .match-col { flex: 1; display: flex; flex-direction: column; gap: 12px; }
        .match-item { padding: 15px; border: 2px solid #ddd; border-radius: 10px; cursor: pointer; text-align: center; background: white; font-size: 15px; }
        .match-item.active { border-color: #2196f3; background: #e3f2fd; }
        .match-item.locked { cursor: default; opacity: 0.5; border-color: var(--correct-green); background: #e8f5e9; }
        input[type="text"] { width: 100%; padding: 15px; font-size: 24px; border: 3px solid #ddd; border-radius: 10px; text-align: center; box-sizing: border-box; }
        #feedback-area { margin-top: 20px; font-size: 20px; font-weight: bold; text-align: center; height: 30px; }
        .nav-group { margin-top: 40px; display: flex; justify-content: center; gap: 20px; border-top: 1px solid #eee; padding-top: 20px; }
        .nav-btn { padding: 12px 40px; cursor: pointer; border: none; border-radius: 30px; font-weight: bold; font-size: 16px; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="main-menu">
        <h1>ğŸ‡¯ğŸ‡µ æœ¬å·è¦³å…‰åœ°ãƒã‚¹ã‚¿ãƒ¼</h1>
        <button class="menu-btn" onclick="startMode(1)">1. éƒ½é“åºœçœŒ â†’ è¦³å…‰åœ°ï¼ˆå˜ä¸€é¸æŠï¼‰</button>
        <button class="menu-btn" onclick="startMode(2)">2. è¦³å…‰åœ° â†’ éƒ½é“åºœçœŒï¼ˆå˜ä¸€é¸æŠï¼‰</button>
        <button class="menu-btn" onclick="startMode(3)">3. éƒ½é“åºœçœŒ â†’ è¦³å…‰åœ°ï¼ˆè¤‡æ•°é¸æŠãƒ»6æŠï¼‰</button>
        <button class="menu-btn" onclick="startMode(4)">4. æ­£èª¤åˆ¤å®šã‚¯ã‚¤ã‚º</button>
        <button class="menu-btn" onclick="startMode(5)">5. ç·šçµã³ï¼ˆãƒãƒƒãƒãƒ³ã‚°ï¼‰</button>
        <button class="menu-btn" onclick="startMode(6)">6. ãµã‚ŠãŒãªå…¥åŠ›ï¼ˆè§£ç­”è¡¨ç¤ºä»˜ï¼‰</button>
    </div>

    <div id="game-area" style="display:none">
        <div id="question-text"></div>
        <div id="content"></div>
        <div id="feedback-area"></div>
        <div class="nav-group">
            <button class="nav-btn" style="background:#eee;" onclick="location.reload()">æˆ»ã‚‹</button>
            <button class="nav-btn" style="background:var(--main-red); color:white;" onclick="renderQuestion()">æ¬¡ã®å•é¡Œã¸</button>
        </div>
    </div>
</div>

<script>
// è¿™é‡Œæ”¾å…¥181æ¡æ•°æ®
const rawData = [
    {p: "æ±äº¬éƒ½", s: "æµ…è‰å¯º", k: "ã›ã‚“ãã†ã˜"}, {p: "æ±äº¬éƒ½", s: "æ˜æ²»ç¥å®®", k: "ã‚ã„ã˜ã˜ã‚“ãã†"}, {p: "æ±äº¬éƒ½", s: "ç¥ç”°æ˜ç¥", k: "ã‹ã‚“ã ã¿ã‚‡ã†ã˜ã‚“"}, {p: "æ±äº¬éƒ½", s: "æ–°å®¿å¾¡è‹‘", k: "ã—ã‚“ã˜ã‚…ããã‚‡ãˆã‚“"}, {p: "æ±äº¬éƒ½", s: "ä¸Šé‡æ©è³œå…¬åœ’", k: "ã†ãˆã®ãŠã‚“ã—ã“ã†ãˆã‚“"}, {p: "æ±äº¬éƒ½", s: "æ¸‹è°·ã‚¹ã‚¯ãƒ©ãƒ³ãƒ–ãƒ«äº¤å·®ç‚¹", k: "ã—ã¶ã‚„ã‚¹ã‚¯ãƒ©ãƒ³ãƒ–ãƒ«ã“ã†ã•ã¦ã‚“"}, {p: "æ±äº¬éƒ½", s: "éŠ€åº§", k: "ãã‚“ã–"}, {p: "æ±äº¬éƒ½", s: "ãŠå°å ´", k: "ãŠã ã„ã°"}, {p: "æ±äº¬éƒ½", s: "æ±äº¬ã‚¿ãƒ¯ãƒ¼", k: "ã¨ã†ãã‚‡ã†ã‚¿ãƒ¯ãƒ¼"}, {p: "æ±äº¬éƒ½", s: "æ±äº¬ã‚¹ã‚«ã‚¤ãƒ„ãƒªãƒ¼", k: "ã¨ã†ãã‚‡ã†ã‚¹ã‚«ã‚¤ãƒ„ãƒªãƒ¼"},
    {p: "äº¬éƒ½åºœ", s: "åµå±±", k: "ã‚ã‚‰ã—ã‚„ã¾"}, {p: "äº¬éƒ½åºœ", s: "æ¸¡æœˆæ©‹", k: "ã¨ã’ã¤ãã‚‡ã†"}, {p: "äº¬éƒ½åºœ", s: "ç«¹æ—ã®å°å¾„", k: "ã¡ãã‚Šã‚“ã®ã“ã¿ã¡"}, {p: "äº¬éƒ½åºœ", s: "æ¯”å¡å±±", k: "ã²ãˆã„ã–ã‚“"}, {p: "äº¬éƒ½åºœ", s: "æ¸…æ°´å¯º", k: "ãã‚ˆã¿ãšã§ã‚‰"}, {p: "äº¬éƒ½åºœ", s: "é‡‘é–£å¯º", k: "ãã‚“ã‹ãã˜"}, {p: "äº¬éƒ½åºœ", s: "éŠ€é–£å¯º", k: "ãã‚“ã‹ãã˜"}, {p: "äº¬éƒ½åºœ", s: "ä¼è¦‹ç¨²è·å¤§ç¤¾", k: "ãµã—ã¿ã„ãªã‚ŠãŸã„ã—ã‚ƒ"}, {p: "äº¬éƒ½åºœ", s: "ç¥‡åœ’", k: "ããŠã‚“"}, {p: "äº¬éƒ½åºœ", s: "äºŒæ¡åŸ", k: "ã«ã˜ã‚‡ã†ã˜ã‚‡ã†"}, {p: "äº¬éƒ½åºœ", s: "å¹³ç­‰é™¢", k: "ã³ã‚‡ã†ã©ã†ã„ã‚“"}, {p: "äº¬éƒ½åºœ", s: "å¤©æ©‹ç«‹", k: "ã‚ã¾ã®ã¯ã—ã ã¦"},
    {p: "å¤§é˜ªåºœ", s: "ç®•é¢å¤§æ»", k: "ã¿ã®ãŠãŠãŠãŸã"}, {p: "å¤§é˜ªåºœ", s: "å‹å°¾å¯º", k: "ã‹ã¤ãŠã˜"}, {p: "å¤§é˜ªåºœ", s: "å¤§é˜ªåŸ", k: "ãŠãŠã•ã‹ã˜ã‚‡ã†"}, {p: "å¤§é˜ªåºœ", s: "é“é “å €", k: "ã©ã†ã¨ã‚“ã¼ã‚Š"}, {p: "å¤§é˜ªåºœ", s: "é»’é–€å¸‚å ´", k: "ãã‚ã‚‚ã‚“ã„ã¡ã°"}, {p: "å¤§é˜ªåºœ", s: "é€šå¤©é–£", k: "ã¤ã†ã¦ã‚“ã‹ã"}, {p: "å¤§é˜ªåºœ", s: "å››å¤©ç‹å¯º", k: "ã—ã¦ã‚“ã®ã†ã˜"},
    {p: "é’æ£®çœŒ", s: "å¥¥å…¥ç€¬æ¸“æµ", k: "ãŠã„ã‚‰ã›ã‘ã„ã‚Šã‚…ã†"}, {p: "é’æ£®çœŒ", s: "åå’Œç”°æ¹–", k: "ã¨ã‚ã ã“"}, {p: "é’æ£®çœŒ", s: "å…«ç”²ç”°å±±", k: "å…«ç”²ç”°å±±"}, {p: "é’æ£®çœŒ", s: "ç™½ç¥å±±åœ°", k: "ã—ã‚‰ã‹ã¿ã•ã‚“ã¡"}, {p: "é’æ£®çœŒ", s: "å¼˜å‰åŸ", k: "ã²ã‚ã•ãã˜ã‚‡ã†"}, {p: "é’æ£®çœŒ", s: "ä¸‰å†…ä¸¸å±±éºè·¡", k: "ã•ã‚“ãªã„ã¾ã‚‹ã‚„ã¾ã„ã›ã"}, {p: "é’æ£®çœŒ", s: "æµ…è™«æ¸©æ³‰", k: "ã‚ã•ã‚€ã—ãŠã‚“ã›ã‚“"},
    {p: "å²©æ‰‹çœŒ", s: "ä¸­å°Šå¯º", k: "ã¡ã‚…ã†ãã‚“ã˜"}, {p: "å²©æ‰‹çœŒ", s: "æ¯›è¶Šå¯º", k: "ã‚‚ã†ã¤ã˜"}, {p: "å²©æ‰‹çœŒ", s: "é¾æ³‰æ´", k: "ã‚Šã‚…ã†ã›ã‚“ã©ã†"}, {p: "å²©æ‰‹çœŒ", s: "æµ„åœŸãƒ¶æµœ", k: "ã˜ã‚‡ã†ã©ãŒã¯ã¾"}, {p: "å²©æ‰‹çœŒ", s: "å…«å¹¡å¹³", k: "ã¯ã¡ã¾ã‚“ãŸã„"}, {p: "å²©æ‰‹çœŒ", s: "å°å²©äº•è¾²å ´", k: "ã“ã„ã‚ã„ã®ã†ã˜ã‚‡ã†"},
    {p: "å®®åŸçœŒ", s: "æ¾å³¶", k: "ã¾ã¤ã—ã¾"}, {p: "å®®åŸçœŒ", s: "ç‘é³³æ®¿", k: "ç‘é³³æ®¿"}, {p: "å®®åŸçœŒ", s: "ä»™å°åŸè·¡", k: "ã›ã‚“ã ã„ã˜ã‚‡ã†ã›ã"}, {p: "å®®åŸçœŒ", s: "å®šç¦…å¯ºé€š", k: "ã˜ã‚‡ã†ãœã‚“ã˜ã©ãŠã‚Š"}, {p: "å®®åŸçœŒ", s: "ç§‹ä¿å¤§æ»", k: "ã‚ãã†ãŠãŠãŸã"}, {p: "å®®åŸçœŒ", s: "é¹½ç«ˆç¥ç¤¾", k: "ã—ãŠãŒã¾ã˜ã‚“ã˜ã‚ƒ"},
    {p: "ç§‹ç”°çœŒ", s: "ç”°æ²¢æ¹–", k: "ãŸã–ã‚ã“"}, {p: "ç§‹ç”°çœŒ", s: "è§’é¤¨æ­¦å®¶å±‹æ•·", k: "ã‹ãã®ã ã¦ã¶ã‘ã‚„ã—ã"}, {p: "ç§‹ç”°çœŒ", s: "ä¹³é ­æ¸©æ³‰éƒ·", k: "ã«ã‚…ã†ã¨ã†ãŠã‚“ã›ã‚“ãã‚‡ã†"}, {p: "ç§‹ç”°çœŒ", s: "ç”·é¹¿åŠå³¶", k: "ãŠãŒã¯ã‚“ã¨ã†"}, {p: "ç§‹ç”°çœŒ", s: "æ£®å‰å±±", k: "ã‚‚ã‚Šã‚ˆã—ã–ã‚“"},
    {p: "å±±å½¢çœŒ", s: "ç«‹çŸ³å¯º", k: "ã‚Šã£ã—ã‚ƒãã˜"}, {p: "å±±å½¢çœŒ", s: "å±±å¯º", k: "ã‚„ã¾ã§ã‚‰"}, {p: "å±±å½¢çœŒ", s: "éŠ€å±±æ¸©æ³‰", k: "ãã‚“ã–ã‚“ãŠã‚“ã›ã‚“"}, {p: "å±±å½¢çœŒ", s: "è”µç‹æ¸©æ³‰", k: "ã–ãŠã†ãŠã‚“ã›ã‚“"}, {p: "å±±å½¢çœŒ", s: "è”µç‹æ¨¹æ°·", k: "ã–ãŠã†ã˜ã‚…ã²ã‚‡ã†"}, {p: "å±±å½¢çœŒ", s: "æœˆå±±", k: "ãŒã£ã•ã‚“"},
    {p: "ç¦å³¶çœŒ", s: "é¶´ãƒ¶åŸ", k: "ã¤ã‚‹ãŒã˜ã‚‡ã†"}, {p: "ç¦å³¶çœŒ", s: "å¤§å†…å®¿", k: "ãŠãŠã†ã¡ã˜ã‚…ã"}, {p: "ç¦å³¶çœŒ", s: "äº”è‰²æ²¼", k: "ã”ã—ãã¬ã¾"}, {p: "ç¦å³¶çœŒ", s: "ç£æ¢¯å±±", k: "ã°ã‚“ã ã„ã•ã‚“"}, {p: "ç¦å³¶çœŒ", s: "é£¯å‚æ¸©æ³‰", k: "ã„ã„ã–ã‹ãŠã‚“ã›ã‚“"}, {p: "ç¦å³¶çœŒ", s: "æ±å±±æ¸©æ³‰", k: "ã²ãŒã—ã‚„ã¾ãŠã‚“ã›ã‚“"},
    {p: "èŒ¨åŸçœŒ", s: "å•æ¥½åœ’", k: "ã‹ã„ã‚‰ããˆã‚“"}, {p: "èŒ¨åŸçœŒ", s: "å›½å–¶ã²ãŸã¡æµ·æµœå…¬åœ’", k: "ã“ããˆã„ã²ãŸã¡ã‹ã„ã²ã‚“ã“ã†ãˆã‚“"}, {p: "èŒ¨åŸçœŒ", s: "è¢‹ç”°ã®æ»", k: "ãµãã‚ã ã®ãŸã"}, {p: "èŒ¨åŸçœŒ", s: "é¹¿å³¶ç¥å®®", k: "ã‹ã—ã¾ã˜ã‚“ãã†"}, {p: "èŒ¨åŸçœŒ", s: "å¤§æ´—ç£¯å‰ç¥ç¤¾", k: "ãŠãŠã‚ã‚‰ã„ã„ãã•ãã˜ã‚“ã˜ã‚ƒ"},
    {p: "æ ƒæœ¨çœŒ", s: "æ—¥å…‰æ±ç…§å®®", k: "ã«ã£ã“ã†ã¨ã†ã—ã‚‡ã†ãã†"}, {p: "æ ƒæœ¨çœŒ", s: "æ—¥å…‰äºŒè’å±±ç¥ç¤¾", k: "ã«ã£ã“ã†ãµãŸã‚‰ã•ã‚“ã˜ã‚“ã˜ã‚ƒ"}, {p: "æ ƒæœ¨çœŒ", s: "ä¸­ç¦…å¯ºæ¹–", k: "ã¡ã‚…ã†ãœã‚“ã˜ã“"}, {p: "æ ƒæœ¨çœŒ", s: "è¯å³ã®æ»", k: "ã‘ã”ã‚“ã®ãŸã"}, {p: "æ ƒæœ¨çœŒ", s: "é‚£é ˆé«˜åŸ", k: "ãªã™ã”ã†ã’ã‚“"},
    {p: "ç¾¤é¦¬çœŒ", s: "è‰æ´¥æ¸©æ³‰", k: "ãã•ã¤ãŠã‚“ã›ã‚“"}, {p: "ç¾¤é¦¬çœŒ", s: "ä¼Šé¦™ä¿æ¸©æ³‰", k: "ã„ã‹ã»ãŠã‚“ã›ã‚“"}, {p: "ç¾¤é¦¬çœŒ", s: "å››ä¸‡æ¸©æ³‰", k: "ã—ã¾ãŠã‚“ã›ã‚“"}, {p: "ç¾¤é¦¬çœŒ", s: "å¯Œå²¡è£½ç³¸å ´", k: "ã¨ã¿ãŠã‹ã›ã„ã—ã˜ã‚‡ã†"}, {p: "ç¾¤é¦¬çœŒ", s: "å¹å‰²ã®æ»", k: "ãµãã‚ã‚Œã®ãŸã"},
    {p: "åŸ¼ç‰çœŒ", s: "å·è¶Š", k: "ã‹ã‚ã”ãˆ"}, {p: "åŸ¼ç‰çœŒ", s: "è“å­å±‹æ¨ªä¸", k: "ã‹ã—ã‚„ã‚ˆã“ã¡ã‚‡ã†"}, {p: "åŸ¼ç‰çœŒ", s: "é•·ç€", k: "ãªãŒã¨ã‚"}, {p: "åŸ¼ç‰çœŒ", s: "ç§©çˆ¶ç¥ç¤¾", k: "ã¡ã¡ã¶ã˜ã‚“ã˜ã‚ƒ"}, {p: "åŸ¼ç‰çœŒ", s: "ä¸‰å³°ç¥ç¤¾", k: "ã¿ã¤ã¿ã­ã˜ã‚“ã˜ã‚ƒ"}, {p: "åŸ¼ç‰çœŒ", s: "å–œå¤šé™¢", k: "ããŸã„ã‚“"},
    {p: "åƒè‘‰çœŒ", s: "æˆç”°å±±æ–°å‹å¯º", k: "ãªã‚ŠãŸã•ã‚“ã—ã‚“ã—ã‚‡ã†ã˜"}, {p: "åƒè‘‰çœŒ", s: "çŠ¬å åŸ¼ç¯å°", k: "ã„ã¬ã¼ã†ã•ãã¨ã†ã ã„"}, {p: "åƒè‘‰çœŒ", s: "ä¹åä¹é‡Œæµœ", k: "ãã˜ã‚…ã†ãã‚Šã¯ã¾"}, {p: "åƒè‘‰çœŒ", s: "æˆ¿ç·åŠå³¶", k: "ã¼ã†ãã†ã¯ã‚“ã¨ã†"},
    {p: "ç¥å¥ˆå·çœŒ", s: "é¶´å²¡å…«å¹¡å®®", k: "ã¤ã‚‹ãŒãŠã‹ã¯ã¡ã¾ã‚“ãã†"}, {p: "ç¥å¥ˆå·çœŒ", s: "éŒå€‰å¤§ä»", k: "ã‹ã¾ãã‚‰ã ã„ã¶ã¤"}, {p: "ç¥å¥ˆå·çœŒ", s: "é•·è°·å¯º", k: "ã¯ã›ã§ã‚‰"}, {p: "ç¥å¥ˆå·çœŒ", s: "æ±Ÿã®å³¶", k: "ãˆã®ã—ã¾"}, {p: "ç¥å¥ˆå·çœŒ", s: "ç®±æ ¹", k: "ã¯ã“ã­"}, {p: "ç¥å¥ˆå·çœŒ", s: "èŠ¦ãƒæ¹–", k: "ã‚ã—ã®ã“"}, {p: "ç¥å¥ˆå·çœŒ", s: "æ¨ªæµœèµ¤ãƒ¬ãƒ³ã‚¬å€‰åº«", k: "ã‚ˆã“ã¯ã¾ã‚ã‹ãƒ¬ãƒ³ã‚¬ãã†ã“"},
    {p: "æ–°æ½ŸçœŒ", s: "ä½æ¸¡å³¶", k: "ã•ã©ãŒã—ã¾"}, {p: "æ–°æ½ŸçœŒ", s: "æ¸…æ´¥å³¡", k: "ãã‚ˆã¤ãã‚‡ã†"}, {p: "æ–°æ½ŸçœŒ", s: "å¼¥å½¦ç¥ç¤¾", k: "ã‚„ã²ã“ã˜ã‚“ã˜ã‚ƒ"}, {p: "æ–°æ½ŸçœŒ", s: "è¶Šå¾Œæ¹¯æ²¢", k: "ãˆã¡ã”ã‚†ã–ã‚"},
    {p: "å¯Œå±±çœŒ", s: "ç«‹å±±é»’éƒ¨ã‚¢ãƒ«ãƒšãƒ³ãƒ«ãƒ¼ãƒˆ", k: "ãŸã¦ã‚„ã¾ãã‚ã¹ã‚¢ãƒ«ãƒšãƒ³ãƒ«ãƒ¼ãƒˆ"}, {p: "å¯Œå±±çœŒ", s: "äº”ç®‡å±±", k: "ã”ã‹ã‚„ã¾"},
    {p: "çŸ³å·çœŒ", s: "å…¼å…­åœ’", k: "ã‘ã‚“ã‚ããˆã‚“"}, {p: "çŸ³å·çœŒ", s: "é‡‘æ²¢åŸè·¡", k: "ã‹ãªã–ã‚ã˜ã‚‡ã†ã›ã"}, {p: "çŸ³å·çœŒ", s: "ã²ãŒã—èŒ¶å±‹è¡—", k: "ã²ãŒã—ã¡ã‚ƒã‚„ãŒã„"}, {p: "çŸ³å·çœŒ", s: "å¿è€…å¯º", k: "ã«ã‚“ã˜ã‚ƒã§ã‚‰"},
    {p: "ç¦äº•çœŒ", s: "æ±å°‹åŠ", k: "ã¨ã†ã˜ã‚“ã¼ã†"}, {p: "ç¦äº•çœŒ", s: "æ°¸å¹³å¯º", k: "ãˆã„ã¸ã„ã˜"}, {p: "ç¦äº•çœŒ", s: "ç¦äº•çœŒç«‹æç«œåšç‰©é¤¨", k: "ãµãã„ã‘ã‚“ã‚Šã¤ãã‚‡ã†ã‚Šã‚…ã†ã¯ãã¶ã¤ã‹ã‚“"},
    {p: "å±±æ¢¨çœŒ", s: "è¥¿æ¹–ã„ã‚„ã—ã®é‡Œæ ¹å ´", k: "ã•ã„ã“ã„ã‚„ã—ã®ã•ã¨ã­ã‚“ã°"}, {p: "å±±æ¢¨çœŒ", s: "å¯Œå£«å±±äº”åˆç›®", k: "ãµã˜ã•ã‚“ã”ã”ã†ã‚"}, {p: "å±±æ¢¨çœŒ", s: "æ²³å£æ¹–", k: "ã‹ã‚ãã¡ã“"}, {p: "å±±æ¢¨çœŒ", s: "å±±ä¸­æ¹–", k: "ã‚„ã¾ãªã‹ã“"}, {p: "å±±æ¢¨çœŒ", s: "å¿é‡å…«æµ·", k: "ãŠã—ã®ã¯ã£ã‹ã„"}, {p: "å±±æ¢¨çœŒ", s: "èº«å»¶å±±ä¹…é å¯º", k: "ã¿ã®ã¶ã•ã‚“ããŠã‚“ã˜"},
    {p: "é•·é‡çœŒ", s: "ä¸Šé«˜åœ°", k: "ã‹ã¿ã“ã†ã¡"}, {p: "é•·é‡çœŒ", s: "æ¾æœ¬åŸ", k: "ã¾ã¤ã‚‚ã¨ã˜ã‚‡ã†"}, {p: "é•·é‡çœŒ", s: "å–„å…‰å¯º", k: "ãœã‚“ã“ã†ã˜"}, {p: "é•·é‡çœŒ", s: "åœ°ç„è°·é‡çŒ¿å…¬è‹‘", k: "ã˜ã”ãã ã«ã‚„ãˆã‚“ã“ã†ãˆã‚“"}, {p: "é•·é‡çœŒ", s: "è»½äº•æ²¢", k: "ã‹ã‚‹ã„ã–ã‚"},
    {p: "å²é˜œçœŒ", s: "æµé‚£å³¡", k: "ãˆãªãã‚‡ã†"}, {p: "å²é˜œçœŒ", s: "ç™½å·éƒ·", k: "ã—ã‚‰ã‹ã‚ã”ã†"}, {p: "å²é˜œçœŒ", s: "é«˜å±±é™£å±‹", k: "ãŸã‹ã‚„ã¾ã˜ã‚“ã‚„"}, {p: "å²é˜œçœŒ", s: "å¤ã„ç”ºä¸¦", k: "ãµã‚‹ã„ã¾ã¡ãªã¿"}, {p: "å²é˜œçœŒ", s: "é£›é¨¨å¤å·", k: "ã²ã ãµã‚‹ã‹ã‚"}, {p: "å²é˜œçœŒ", s: "ä¸‹å‘‚æ¸©æ³‰", k: "ã’ã‚ãŠã‚“ã›ã‚“"},
    {p: "é™å²¡çœŒ", s: "ä¸‰ä¿æ¾åŸ", k: "ã¿ã»ã®ã¾ã¤ã°ã‚‰"}, {p: "é™å²¡çœŒ", s: "ä¼Šè±†åŠå³¶", k: "ã„ãšã¯ã‚“ã¨ã†"}, {p: "é™å²¡çœŒ", s: "ä¿®å–„å¯º", k: "ã—ã‚…ãœã‚“ã˜"}, {p: "é™å²¡çœŒ", s: "ç†±æµ·æ¸©æ³‰", k: "ã‚ãŸã¿ãŠã‚“ã›ã‚“"}, {p: "é™å²¡çœŒ", s: "ç‰éœ²ã®é‡Œ", k: "ãã‚‡ãã‚ã®ã•ã¨"},
    {p: "æ„›çŸ¥çœŒ", s: "ä¹…å±‹å¤§é€šå…¬åœ’", k: "ã²ã•ã‚„ãŠãŠã©ãŠã‚Šã“ã†ãˆã‚“"}, {p: "æ„›çŸ¥çœŒ", s: "ååŸå…¬åœ’", k: "ã‚ã„ã˜ã‚‡ã†ã“ã†ãˆã‚“"}, {p: "æ„›çŸ¥çœŒ", s: "å¸¸æ»‘ã‚„ãã‚‚ã®æ•£æ­©é“", k: "ã¨ã“ãªã‚ã‚„ãã‚‚ã®ã•ã‚“ã½ã¿ã¡"}, {p: "æ„›çŸ¥çœŒ", s: "åå¤å±‹åŸ", k: "ãªã”ã‚„ã˜ã‚‡ã†"}, {p: "æ„›çŸ¥çœŒ", s: "ç†±ç”°ç¥å®®", k: "ã‚ã¤ãŸã˜ã‚“ãã†"}, {p: "æ„›çŸ¥çœŒ", s: "çŠ¬å±±åŸ", k: "ã„ã¬ã‚„ã¾ã˜ã‚‡ã†"}, {p: "æ„›çŸ¥çœŒ", s: "æ˜æ²»æ‘", k: "ã‚ã„ã˜ã‚€ã‚‰"},
    {p: "ä¸‰é‡çœŒ", s: "ä¼Šå‹¢ç¥å®®", k: "ã„ã›ã˜ã‚“ãã†"}, {p: "ä¸‰é‡çœŒ", s: "äºŒè¦‹èˆˆç‰ç¥ç¤¾", k: "ãµãŸã¿ãŠããŸã¾ã˜ã‚“ã˜ã‚ƒ"}, {p: "ä¸‰é‡çœŒ", s: "å¤«å©¦å²©", k: "ã‚ãŠã¨ã„ã‚"}, {p: "ä¸‰é‡çœŒ", s: "é³¥ç¾½æ°´æ—é¤¨", k: "ã¨ã°ã™ã„ããã‹ã‚“"},
    {p: "æ»‹è³€çœŒ", s: "çµç¶æ¹–", k: "ã³ã‚ã“"}, {p: "æ»‹è³€çœŒ", s: "å½¦æ ¹åŸ", k: "ã²ã“ã­ã˜ã‚‡ã†"}, {p: "æ»‹è³€çœŒ", s: "ç™½é«­ç¥ç¤¾", k: "ã—ã‚‰ã²ã’ã˜ã‚“ã˜ã‚ƒ"},
    {p: "å…µåº«çœŒ", s: "ç¥æˆ¸å¸ƒå¼•ãƒãƒ¼ãƒ–åœ’", k: "ã“ã†ã¹ã¬ã®ã³ãã¯ãƒ¼ã¶ãˆã‚“"}, {p: "å…µåº«çœŒ", s: "å§«è·¯åŸ", k: "ã²ã‚ã˜ã˜ã‚‡ã†"}, {p: "å…µåº«çœŒ", s: "æœ‰é¦¬æ¸©æ³‰", k: "ã‚ã‚Šã¾ãŠã‚“ã›ã‚“"}, {p: "å…µåº«çœŒ", s: "åŸå´æ¸©æ³‰", k: "ãã®ã•ããŠã‚“ã›ã‚“"}, {p: "å…µåº«çœŒ", s: "ç«¹ç”°åŸè·¡", k: "ãŸã‘ã ã˜ã‚‡ã†ã‚ã¨"}, {p: "å…µåº«çœŒ", s: "ç¥æˆ¸ãƒãƒ¼ãƒãƒ¼ãƒ©ãƒ³ãƒ‰", k: "ã“ã†ã¹ã¯ãƒ¼ã°ãƒ¼ã‚‰ã‚“ã©"},
    {p: "å¥ˆè‰¯çœŒ", s: "æ±å¤§å¯º", k: "ã¨ã†ã ã„ã˜"}, {p: "å¥ˆè‰¯çœŒ", s: "å¥ˆè‰¯å…¬åœ’", k: "ãªã‚‰ã“ã†ãˆã‚“"}, {p: "å¥ˆè‰¯çœŒ", s: "æ˜¥æ—¥å¤§ç¤¾", k: "ã‹ã™ãŒãŸã„ã—ã‚ƒ"}, {p: "å¥ˆè‰¯çœŒ", s: "æ³•éš†å¯º", k: "ã»ã†ã‚Šã‚…ã†ã˜"}, {p: "å¥ˆè‰¯çœŒ", s: "å‰é‡å±±", k: "ã‚ˆã—ã®ã‚„ã¾"},
    {p: "å’Œæ­Œå±±çœŒ", s: "é«˜é‡å±±", k: "ã“ã†ã‚„ã•ã‚“"}, {p: "å’Œæ­Œå±±çœŒ", s: "ç†Šé‡æœ¬å®®å¤§ç¤¾", k: "ãã¾ã®ã»ã‚“ãã†ãŸã„ã—ã‚ƒ"}, {p: "å’Œæ­Œå±±çœŒ", s: "ç†Šé‡é‚£æ™ºå¤§ç¤¾", k: "ãã¾ã®ãªã¡ãŸã„ã—ã‚ƒ"}, {p: "å’Œæ­Œå±±çœŒ", s: "é‚£æ™ºã®æ»", k: "ãªã¡ã®ãŸã"}, {p: "å’Œæ­Œå±±çœŒ", s: "ç™½æµœæ¸©æ³‰", k: "ã—ã‚‰ã¯ã¾ãŠã‚“ã›ã‚“"},
    {p: "é³¥å–çœŒ", s: "é³¥å–ç ‚ä¸˜", k: "ã¨ã£ã¨ã‚Šã•ãã‚…ã†"}, {p: "é³¥å–çœŒ", s: "æµ¦å¯Œæµ·å²¸", k: "ã†ã‚‰ã©ã‚ã‹ã„ãŒã‚“"},
    {p: "å³¶æ ¹çœŒ", s: "å‡ºé›²å¤§ç¤¾", k: "ã„ãšã‚‚ãŸã„ã—ã‚ƒ"}, {p: "å³¶æ ¹çœŒ", s: "çŸ³è¦‹éŠ€å±±", k: "ã„ã‚ã¿ãã‚“ã–ã‚“"}, {p: "å³¶æ ¹çœŒ", s: "æ¾æ±ŸåŸ", k: "ã¾ã¤ãˆã˜ã‚‡ã†"}, {p: "å³¶æ ¹çœŒ", s: "å®é“æ¹–", k: "ã—ã‚“ã˜ã“"},
    {p: "å²¡å±±çœŒ", s: "å€‰æ•·ç¾è¦³åœ°åŒº", k: "ãã‚‰ã—ãã³ã‹ã‚“ã¡ã"}, {p: "å²¡å±±çœŒ", s: "å²¡å±±å¾Œæ¥½åœ’", k: "ãŠã‹ã‚„ã¾ã“ã†ã‚‰ããˆã‚“"}, {p: "å²¡å±±çœŒ", s: "å²¡å±±åŸ", k: "ãŠã‹ã‚„ã¾ã˜ã‚‡ã†"}, {p: "å²¡å±±çœŒ", s: "å‰å‚™æ´¥ç¥ç¤¾", k: "ãã³ã¤ã˜ã‚“ã˜ã‚ƒ"},
    {p: "åºƒå³¶çœŒ", s: "å³å³¶ç¥ç¤¾", k: "ã„ã¤ãã—ã¾ã˜ã‚“ã˜ã‚ƒ"}, {p: "åºƒå³¶çœŒ", s: "å®®å³¶", k: "ã¿ã‚„ã˜ã¾"}, {p: "åºƒå³¶çœŒ", s: "å¹³å’Œè¨˜å¿µå…¬åœ’", k: "ã¸ã„ã‚ãã­ã‚“ã“ã†ãˆã‚“"}, {p: "åºƒå³¶çœŒ", s: "åŸçˆ†ãƒ‰ãƒ¼ãƒ ", k: "ã’ã‚“ã°ããƒ‰ãƒ¼ãƒ "}, {p: "åºƒå³¶çœŒ", s: "å°¾é“", k: "ãŠã®ã¿ã¡"},
    {p: "å±±å£çœŒ", s: "éŒ¦å¸¯æ©‹", k: "ãã‚“ãŸã„ãã‚‡ã†"}, {p: "å±±å£çœŒ", s: "ç§‹èŠ³æ´", k: "ã‚ãã‚ˆã—ã©ã†"}, {p: "å±±å£çœŒ", s: "è§’å³¶å¤§æ©‹", k: "ã¤ã®ã—ã¾ãŠãŠã¯ã—"}, {p: "å±±å£çœŒ", s: "å…ƒä¹ƒéš…ç¥ç¤¾", k: "ã‚‚ã¨ã®ã™ã¿ã˜ã‚“ã˜ã‚ƒ"}
];

let mode = 0;
let currentItem = null;
let matchState = { left: null, right: null };

function startMode(m) {
    mode = m;
    document.getElementById('main-menu').style.display = 'none';
    document.getElementById('game-area').style.display = 'block';
    renderQuestion();
}

function renderQuestion() {
    const qText = document.getElementById('question-text');
    const content = document.getElementById('content');
    const feedback = document.getElementById('feedback-area');
    content.innerHTML = ''; feedback.innerText = ''; 
    matchState = { left: null, right: null };
    
    currentItem = rawData[Math.floor(Math.random() * rawData.length)];

    if (mode === 1 || mode === 2) {
        const isType1 = mode === 1;
        qText.innerText = isType1 ? `ã€${currentItem.p}ã€‘ã«ã‚ã‚‹è¦³å…‰åœ°ã¯ï¼Ÿ` : `ã€${currentItem.s}ã€‘ã¯ã©ã“ã«ã‚ã‚‹ï¼Ÿ`;
        const key = isType1 ? 's' : 'p';
        let options = shuffle([currentItem[key], ...getDistractors(key, currentItem[key], 3)]);
        content.className = 'option-grid';
        options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'option-btn'; btn.innerText = opt;
            btn.onclick = () => btn.classList.add(opt === currentItem[key] ? 'correct' : 'wrong');
            content.appendChild(btn);
        });
    } else if (mode === 3) {
        qText.innerText = `ã€${currentItem.p}ã€‘ã«ã‚ã‚‹ã‚‚ã®ã‚’å…¨ã¦é¸ã‚“ã§ãã ã•ã„ï¼ˆ6æŠï¼‰`;
        
        // 1. è·å–è¯¥åœ°åŒºæ‰€æœ‰æ­£ç¡®çš„æ™¯ç‚¹
        const allCorrect = rawData.filter(x => x.p === currentItem.p).map(x => x.s);
        
        // 2. ä»æ­£ç¡®ç­”æ¡ˆä¸­éšæœºæŠ½å– 1 åˆ° 3 ä¸ªï¼ˆç¡®ä¿é€‰é¡¹é‡Œæœ‰æ­£ç¡®ç­”æ¡ˆï¼Œä½†ä¸ä¼šå…¨æ˜¯æ­£ç¡®ç­”æ¡ˆï¼‰
        let numCorrectToDisplay = Math.min(allCorrect.length, Math.floor(Math.random() * 3) + 1);
        let selectedCorrect = shuffle(allCorrect).slice(0, numCorrectToDisplay);
        
        // 3. å‡†å¤‡å¹²æ‰°é¡¹ï¼ˆå…¶ä»–å¿çš„æ™¯ç‚¹ï¼‰
        let options = [...selectedCorrect];
        while(options.length < 6) {
            let distractor = rawData[Math.floor(Math.random() * rawData.length)].s;
            // ç¡®ä¿å¹²æ‰°é¡¹ä¸é‡å¤ï¼Œä¸”ä¸å±äºå½“å‰å¿
            if(!options.includes(distractor) && !allCorrect.includes(distractor)) {
                options.push(distractor);
            }
        }
        
        content.className = 'option-grid';
        shuffle(options).forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'option-btn'; 
            btn.innerText = opt;
            btn.onclick = () => {
                // åˆ¤æ–­ç‚¹å‡»çš„æ˜¯å¦åœ¨å½“å‰å¿çš„æ‰€æœ‰æ­£ç¡®æ™¯ç‚¹åˆ—è¡¨é‡Œ
                if(allCorrect.includes(opt)) {
                    btn.classList.add('correct');
                } else {
                    btn.classList.add('wrong');
                }
            };
            content.appendChild(btn);
        });
    } else if (mode === 4) {
        const isTrue = Math.random() > 0.5;
        const fakeP = getDistractors('p', currentItem.p, 1)[0];
        qText.innerText = `ã€${currentItem.s}ã€‘ã¯ã€${isTrue ? currentItem.p : fakeP}ã€‘ã«ã‚ã‚‹ï¼Ÿ`;
        content.className = 'option-grid';
        [{t:'ã¯ã„', v:true}, {t:'ã„ã„ãˆ', v:false}].forEach(o => {
            const btn = document.createElement('button');
            btn.className = 'option-btn'; btn.innerText = o.t;
            btn.onclick = () => btn.classList.add(o.v === isTrue ? 'correct' : 'wrong');
            content.appendChild(btn);
        });
    } else if (mode === 5) {
        qText.innerText = "ãƒšã‚¢ã‚’é¸ã‚“ã§ãã ã•ã„";
        renderMatchMode();
    } else if (mode === 6) {
        qText.innerText = `ã€${currentItem.s}ã€‘ã®èª­ã¿æ–¹ã¯ï¼Ÿ`;
        content.className = '';
        content.innerHTML = `<input type="text" id="k-in" placeholder="ã²ã‚‰ãŒãªã‚’å…¥åŠ›..." autofocus>`;
        const input = document.getElementById('k-in');
        input.onkeydown = (e) => {
            if(e.key === 'Enter') {
                if(input.value === currentItem.k) {
                    input.style.borderColor = "#4caf50";
                    feedback.innerText = "æ­£è§£ã§ã™ï¼ âœ…"; feedback.style.color = "#4caf50";
                } else {
                    input.style.borderColor = "#f44336";
                    feedback.innerText = `ä¸æ­£è§£ï¼ æ­£è§£ã¯ï¼š${currentItem.k}`; feedback.style.color = "#f44336";
                }
            }
        };
    }
}

function renderMatchMode() {
    const content = document.getElementById('content');
    content.className = 'match-container';
    let pool = shuffle([...rawData]).slice(0, 6);
    let leftItems = shuffle(pool.map(x => ({id: x.s, text: x.p})));
    let rightItems = shuffle(pool.map(x => ({id: x.s, text: x.s})));
    const leftCol = document.createElement('div'); leftCol.className = 'match-col';
    const rightCol = document.createElement('div'); rightCol.className = 'match-col';

    const handleMatch = (itemData, el, side) => {
        if(el.classList.contains('locked')) return;
        const currentSideItems = document.querySelectorAll(`.match-col:nth-child(${side === 'left' ? 1 : 2}) .match-item`);
        currentSideItems.forEach(i => i.classList.remove('active'));
        el.classList.add('active');
        matchState[side] = { el, id: itemData.id };
        
        if(matchState.left && matchState.right) {
            if(matchState.left.id === matchState.right.id) {
                matchState.left.el.classList.add('correct', 'locked');
                matchState.right.el.classList.add('correct', 'locked');
                matchState.left.el.classList.remove('active');
                matchState.right.el.classList.remove('active');
            } else {
                const l = matchState.left.el, r = matchState.right.el;
                l.classList.add('wrong'); r.classList.add('wrong');
                setTimeout(() => { l.classList.remove('wrong', 'active'); r.classList.remove('wrong', 'active'); }, 400);
            }
            matchState = { left: null, right: null };
        }
    };

    leftItems.forEach(d => {
        const div = document.createElement('div'); div.className = 'match-item'; div.innerText = d.text;
        div.onclick = () => handleMatch(d, div, 'left');
        leftCol.appendChild(div);
    });
    rightItems.forEach(d => {
        const div = document.createElement('div'); div.className = 'match-item'; div.innerText = d.text;
        div.onclick = () => handleMatch(d, div, 'right');
        rightCol.appendChild(div);
    });
    content.appendChild(leftCol); content.appendChild(rightCol);
}

function getDistractors(key, exclude, count) {
    let list = [...new Set(rawData.map(x => x[key]))].filter(x => x !== exclude);
    return shuffle(list).slice(0, count);
}

function shuffle(arr) { return arr.slice().sort(() => Math.random() - 0.5); }
</script>
</body>
</html>